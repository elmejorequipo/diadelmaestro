<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profe de Coraz√≥n üíñ La Aventura Inesperada</title>
    <style>
        /* --- CSS MEJORADO: KAWAII, RESPONSIVO Y LEGIBLE --- */
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap');

        :root {
            --kawaii-pink: #ffc2d1;
            --kawaii-lavender: #c8b6ff;
            --kawaii-light-blue: #bde0fe;
            --text-color: #4a4a4a; /* Ligeramente m√°s oscuro para mejor contraste */
            --card-background: #ffffff;
            --shadow-color: rgba(200, 182, 255, 0.35);
            --border-radius: 25px;
            --button-pink: #ffafcc;
        }

        /* Base responsive */
        html {
            font-size: 16px; /* Establece la base para unidades REM */
        }

        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background: linear-gradient(180deg, var(--kawaii-light-blue), var(--kawaii-pink));
            color: var(--text-color);
            margin: 0;
            padding: 1.5rem 1rem; /* Padding responsivo */
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            flex-direction: column;
        }

        #story-container {
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 45px var(--shadow-color);
            border: 4px solid white;
            max-width: 700px;
            width: 100%;
            padding: 2rem 2.5rem; /* Padding m√°s grande y responsivo */
            text-align: center;
            transition: opacity 0.4s ease-in-out, transform 0.4s ease;
        }

        .fade-out {
            opacity: 0;
            transform: scale(0.95);
        }

        h1 {
            color: var(--kawaii-lavender);
            font-weight: 800;
            font-size: 2.25rem; /* Fuente m√°s grande */
            margin-bottom: 1.5rem;
        }

        #story-text {
            font-size: 1.2rem; /* Letra m√°s grande y legible */
            line-height: 1.8;
            text-align: left;
            margin-bottom: 2rem;
            font-weight: 400;
        }

        #choices-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .choice-button, .action-button {
            background-color: var(--button-pink);
            color: white;
            border: none;
            padding: 1rem 1.25rem;
            border-radius: 50px;
            font-size: 1.2rem; /* Botones m√°s grandes */
            font-family: 'M PLUS Rounded 1c', sans-serif;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(255, 175, 204, 0.4);
        }

        .choice-button:hover, .action-button:hover {
            background-color: var(--kawaii-lavender);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 15px rgba(200, 182, 255, 0.5);
        }
        
        #name-input {
            width: 100%;
            padding: 1rem;
            box-sizing: border-box;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-size: 1.2rem;
            margin-bottom: 1rem;
            text-align: center;
            font-family: 'M PLUS Rounded 1c', sans-serif;
        }
        #name-input:focus {
            outline: none;
            border-color: var(--kawaii-lavender);
        }

        strong {
            font-weight: 700;
            color: var(--kawaii-pink);
        }
        
        #teacher-tribute {
            opacity: 0; /* Inicia invisible */
            padding: 0; /* Sin espacio inicial */
            max-height: 0; /* Oculto y sin afectar el layout */
            overflow: hidden;
            transition: all 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        #teacher-tribute.visible {
            background: #fff;
            color: #4a4a4a;
            padding: 2.5rem;
            border-radius: var(--border-radius);
            margin-top: 2rem;
            max-width: 700px;
            width: 100%;
            border: 5px solid var(--kawaii-lavender);
            text-align: center;
            opacity: 1;
            max-height: 500px; /* Suficiente altura para el contenido */
            animation: fadeInUp 0.8s ease-out;
        }

        #teacher-tribute h2 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--kawaii-pink);
            margin: 0 0 1rem 0;
        }
        #teacher-tribute p {
            font-size: 1.3rem;
            line-height: 1.7;
            margin: 0;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Media Query para pantallas peque√±as */
        @media (max-width: 600px) {
            html { font-size: 14px; }
            body { padding: 1rem 0.5rem; }
            #story-container { padding: 1.5rem; }
        }
        
    </style>
</head>
<body>

    <div id="story-container">
        <h1>üíñ Un H√©roe y un Sombrero üé©</h1>
        <p id="story-text"></p>
        <div id="choices-container"></div>
    </div>
    
    <div id="teacher-tribute"></div>

    <script>
    const storyContainer = document.getElementById('story-container');
    const storyText = document.getElementById('story-text');
    const choicesContainer = document.getElementById('choices-container');
    const teacherTribute = document.getElementById('teacher-tribute');
    
    let teacherName = "";

    const storyData = {
        start: {
            text: () => `¬°Hola, superprofe! üòä‚ú® Prep√°rate para una historia donde t√∫ eres el h√©roe secreto. Por favor, dinos tu nombre para comenzar esta m√°gica aventura.`,
            action: 'getName'
        },
        part1: {
            text: (name) => `La jornada termina en los pasillos del cole. T√∫, <strong>Profe ${name}</strong>, guardas tus cosas mientras sientes esa mezcla de cansancio y satisfacci√≥n.<br><br>De pronto, ves a tu estudiante Leo, cabizbajo y mirando con terror una hoja de examen. Tu 'profe-radar' se enciende. Pero notas algo m√°s... En el reverso del examen, hay unos dibujos extra√±os: un conejo, un sombrero de copa y lo que parece ser la palabra... ¬ø"Abrakadabra"? ü§î`,
            choices: [
                { text: 'Preguntar por la nota con tono amable.', nextScene: 'part2A' },
                { text: 'Preguntar por el conejo dibujado. ¬°Prioridades!', nextScene: 'part2B' }
            ]
        },
        part2A: {
            text: (name) => `Te acercas con tu cl√°sica calma. "Leo, ¬øun d√≠a pesado con los n√∫meros?".<br><br>√âl te mira con p√°nico. "<strong>Profe ${name}</strong>, ¬°es terrible! ¬°No puedo hacer que el 5 se convierta en 10!". T√∫ le miras... y ves que est√° barajando unas cartas debajo del pupitre. Esto es m√°s raro de lo que pensabas.<br><br>Con una sonrisa, le dices: "Bueno, convertir un 5 en un 10 es un truco dif√≠cil. ¬øQuiz√°s el problema no est√° en la nota?"`,
            choices: [
                { text: 'Animarlo a que te cuente el verdadero problema...', nextScene: 'part3' }
            ]
        },
        part2B: {
            text: (name) => `Decides ir directo al misterio. Te acercas y le dices con complicidad: "¬øProblemas con el truco del conejo? A veces se atascan en el sombrero."<br><br>Los ojos de Leo se abren como platos. ¬°Lo has descubierto! üò± "¬°<strong>Profe ${name}</strong>! ¬øC√≥mo supo? ¬°Estoy practicando para ser 'El Gran Leodini' en el show de talentos, pero me da p√°nico esc√©nico y no me puedo concentrar en nada! ¬°Por eso reprob√©!".<br><br>¬°El giro! El problema no era el examen, era el p√°nico a la magia.`,
            choices: [
                { text: '¬°Ofrecerte como su primer espectador! ‚ú®', nextScene: 'part3' }
            ]
        },
        part3: {
            text: (name) => `"A ver, Gran Leodini," dices con una sonrisa gigante, "mu√©strame tu mejor truco". Olvidas por completo el examen. Le das el espacio para que saque su varita (que en realidad es una regla con cinta adhesiva) y sus cartas.<br><br>Leo, temblando un poco, intenta hacer un truco y las cartas salen volando por todos lados. ¬°Un desastre adorable! En lugar de re√≠rte, aplaudes. "¬°Incre√≠ble! ¬°Una lluvia de cartas! ¬°Muy art√≠stico!".<br><br>Le ayudas a recogerlas y le das el mejor consejo: "El truco m√°s grande no es la magia, es creer en el mago. Y <strong>Profe ${name}</strong> cree en ti".`,
            choices: [
                { text: 'El d√≠a del show de talentos...', nextScene: 'final' },
            ]
        },
        final: {
            text: (name) => `Lleg√≥ el d√≠a. El Gran Leodini sube al escenario. A√∫n tiembla, pero te busca entre el p√∫blico, <strong>Profe ${name}</strong>. T√∫ le gui√±as un ojo y levantas los dos pulgares. üëçüëç<br><br>Leo respira hondo y comienza. El truco del pa√±uelo... ¬°funciona! La lluvia de cartas... ¬°ahora es a prop√≥sito y la gente r√≠e y aplaude! Es un √©xito. Al final, hace una gran reverencia y grita: "¬°Gracias a mi m√°nager, el Profe ${name}!".<br><br>Ese d√≠a no solo ayudaste a un mago a encontrar su confianza. Le recordaste que 'Educar es cosa del Coraz√≥n' a veces significa aplaudir una lluvia de cartas para poder, m√°s tarde, resolver una lluvia de problemas de matem√°ticas.`,
            action: 'end'
        }
    };

    function renderScene(sceneId) {
        const scene = storyData[sceneId];
        storyContainer.classList.add('fade-out');

        setTimeout(() => {
            storyText.innerHTML = scene.text(teacherName);
            choicesContainer.innerHTML = '';

            if (scene.choices) {
                scene.choices.forEach(choice => {
                    const button = document.createElement('button');
                    button.innerHTML = choice.text;
                    button.classList.add('choice-button');
                    button.onclick = () => renderScene(choice.nextScene);
                    choicesContainer.appendChild(button);
                });
            }

            if (scene.action === 'getName') {
                const input = document.createElement('input');
                input.id = 'name-input';
                input.type = 'text';
                input.placeholder = 'Escribe tu nombre de h√©roe ‚ú®';
                input.onkeyup = (event) => {
                     if (event.key === 'Enter') startButton.click();
                };

                const startButton = document.createElement('button');
                startButton.innerText = '¬°Revelar mi historia!';
                startButton.classList.add('action-button');
                startButton.onclick = () => {
                    const nameInput = document.getElementById('name-input');
                    if (nameInput.value.trim()) {
                        teacherName = nameInput.value.trim();
                        renderScene('part1');
                    } else {
                        nameInput.placeholder = "¬°Necesitamos el nombre del h√©roe! üòä";
                    }
                };
                
                choicesContainer.appendChild(input);
                choicesContainer.appendChild(startButton);
                input.focus();
            }

            if (scene.action === 'end') {
                storyContainer.style.transition = 'all 0.5s ease';
                storyContainer.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    const tributeContent = `
                        <h2>¬°Un aplauso para ti, <strong>Profe ${teacherName}</strong>!</h2>
                        <p>Esta historia fue sobre ti. Pero la verdad es que cada d√≠a, escribes cap√≠tulos asombrosos en la vida de tus estudiantes. Historias de paciencia, de alegr√≠a y de descubrir magos escondidos.<br><br><strong>Gracias por no ser solo un maestro de materias, sino un MAESTRO DE CORAZONES.</strong><br><br>El mundo es un lugar mucho m√°s m√°gico y brillante gracias a h√©roes como t√∫. ‚ú®üíñ</p>
                    `;
                    teacherTribute.innerHTML = tributeContent;
                    teacherTribute.classList.add('visible');
                }, 600);
                
                const restartButton = document.createElement('button');
                restartButton.innerText = 'üé© Empezar otra aventura';
                restartButton.classList.add('action-button');
                restartButton.style.marginTop = '1rem';
                restartButton.onclick = () => location.reload();
                choicesContainer.appendChild(restartButton);
            }
            
            storyContainer.classList.remove('fade-out');
        }, 500); 
    }
    
    // Iniciar la historia
    renderScene('start');
    </script>
</body>
</html>
